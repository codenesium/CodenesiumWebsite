<!DOCTYPE html>
<html>
  <head>
    <title>Codenesium Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.3" />
<title>Repositories :: Codenesium Documentation</title>
<link rel="shortcut icon" href="/documentation/images/favicon.png" type="image/x-icon" />
<link href="/documentation/css/font-awesome.min.css" rel="stylesheet">
<link href="/documentation/css/nucleus.css" rel="stylesheet">
<link href="/documentation/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/documentation/css/bootstrap.min.css">
<script src="/documentation/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "\/documentation";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/documentation/codenesium/generated-code/repositories/">
    
      <header>
  <div class="logo">
    
	
  
    <p><img src="https://www.codenesium.com/img/favicon.png" alt="alt text" /> <a href="https://www.codenesium.com">Codenesium</a></p>

  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/documentation/" class="dd-item">
          <a href="/documentation/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/documentation/getting-started/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/documentation/getting-started/">Getting started</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/documentation/codenesium/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/documentation/codenesium/">Codenesium</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/documentation/codenesium/generated-code/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/documentation/codenesium/generated-code/">Generated Code</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/documentation/codenesium/generated-code/appsettings/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/appsettings/">
            AppSettings
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/authentication/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/authentication/">
            Authentication
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/autofac/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/autofac/">
            Autofac
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/controllers/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/controllers/">
            Controllers
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/databasemigrations/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/databasemigrations/">
            Database Migrations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/deployment/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/deployment/">
            Deployment
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/entityframework/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/entityframework/">
            Entity Framework
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/filters/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/filters/">
            Filters
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/logging/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/logging/">
            Logging
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/performance/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/performance/">
            Performance
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/documentation/codenesium/generated-code/project-structure/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/documentation/codenesium/generated-code/project-structure/">Project Structure</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/repositories/" class="dd-item active">
        <div>
          <a href="/documentation/codenesium/generated-code/repositories/">
            Repositories
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/services/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/services/">
            Services
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/startup/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/startup/">
            Startus.cs
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/swagger/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/swagger/">
            Swagger
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/testing/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/testing/">
            Testing
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/codenesium/generated-code/validation/" class="dd-item">
        <div>
          <a href="/documentation/codenesium/generated-code/validation/">
            Validation
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/documentation/codenesium/playground-server/" class="dd-item
        ">
      <div>
      <a href="/documentation/codenesium/playground-server/">Playground server</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/documentation/codenesium/application/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/documentation/codenesium/application/">Using the Application</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/documentation/database-forge/" class="dd-item haschildren
        ">
      <div>
      <a href="/documentation/database-forge/">Database Forge</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/documentation/database-forge/loadingandsaving/" class="dd-item">
        <div>
          <a href="/documentation/database-forge/loadingandsaving/">
            Loading and Saving
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/documentation/database-forge/uaingtheforge/" class="dd-item">
        <div>
          <a href="/documentation/database-forge/uaingtheforge/">
            Using the Forge
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/documentation/account/" class="dd-item
        ">
      <div>
      <a href="/documentation/account/">Subscription</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/documentation/getting-started/" >
   Getting started</option> 
  
    <option value="/documentation/codenesium/" >
   Codenesium</option> 
    <option value="/documentation/codenesium/generated-code/" >
  - 
   Generated Code</option> 
      <option value="/documentation/codenesium/generated-code/appsettings/" >-- AppSettings</option>
      <option value="/documentation/codenesium/generated-code/authentication/" >-- Authentication</option>
      <option value="/documentation/codenesium/generated-code/autofac/" >-- Autofac</option>
      <option value="/documentation/codenesium/generated-code/controllers/" >-- Controllers</option>
      <option value="/documentation/codenesium/generated-code/databasemigrations/" >-- Database Migrations</option>
      <option value="/documentation/codenesium/generated-code/deployment/" >-- Deployment</option>
      <option value="/documentation/codenesium/generated-code/entityframework/" >-- Entity Framework</option>
      <option value="/documentation/codenesium/generated-code/filters/" >-- Filters</option>
      <option value="/documentation/codenesium/generated-code/logging/" >-- Logging</option>
      <option value="/documentation/codenesium/generated-code/performance/" >-- Performance</option>
    <option value="/documentation/codenesium/generated-code/project-structure/" >
  -- 
   Project Structure</option> 
  
      <option value="/documentation/codenesium/generated-code/repositories/"  selected>-- Repositories</option>
      <option value="/documentation/codenesium/generated-code/services/" >-- Services</option>
      <option value="/documentation/codenesium/generated-code/startup/" >-- Startus.cs</option>
      <option value="/documentation/codenesium/generated-code/swagger/" >-- Swagger</option>
      <option value="/documentation/codenesium/generated-code/testing/" >-- Testing</option>
      <option value="/documentation/codenesium/generated-code/validation/" >-- Validation</option>
  
    <option value="/documentation/codenesium/playground-server/" >
  - 
   Playground server</option>
    <option value="/documentation/codenesium/application/" >
  - 
   Using the Application</option> 
  
  
    <option value="/documentation/database-forge/" >
   Database Forge</option>
    <option value="/documentation/account/" >
   Subscription</option>



        </select>
      </center>
    </div>
    

    <h1>Repositories</h1>
    
    
    
    <p>Our repositories look like a standard repository.</p>

<p>We do generate a separate repository for each object. This is a violation of DRY. However, a generic repository can be an anti-pattern
and I like the flexibility of a repository per object.</p>

<p>Some design choices I made.</p>

<ol>
<li>We don&rsquo;t expose a method that takes a Func like you will see on a lot of repositories using Entity Framework. I made this choice because I don&rsquo;t
want the repository to be so coupled to Entity Framework is can never be changed. Parsing a Func into something Dapper can understand would be challenging if
not impossible. To accomplish this we only except objects or primitives as parameters. This creates a strong contract for the repository instead of a
generic method that takes a Func. This does require adding methods for everything you want to add.</li>
</ol>

<p>This could me mitigated by using the Strategy pattern and moving the queries to a separate, testable class. It is something I&rsquo;m going to explore in the future.</p>

<p>You can add a generic where method to the derived class to add this yourself.</p>

<p>Repositories are by default broken out by table. As your business domain starts making sense you should move things around to fit your domain. A domain would rarely just need access to one table. Luckily with Entity Framework we have access to the entire context so you can access anything you need from one repository. Repositories
Can be combined or molded to fit your needs and I would expect what is initially generated to change.</p>

<pre><code>public interface IAddressRepository
{
    Task&lt;Address&gt; Create(Address item);

    Task Update(Address item);

    Task Delete(int addressID);

    Task&lt;Address&gt; Get(int addressID);

    Task&lt;List&lt;Address&gt;&gt; All(int skip = 0, int take = int.MaxValue, string orderClause = &quot;&quot;);

    Task&lt;Address&gt; GetAddressLine1AddressLine2CityStateProvinceIDPostalCode(string addressLine1,string addressLine2,string city,int stateProvinceID,string postalCode);
    
    Task&lt;List&lt;Address&gt;&gt; GetStateProvinceID(int stateProvinceID);
}
</code></pre>


    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/documentation/codenesium/generated-code/project-structure/" title="Project Structure"> <i class="fa fa-chevron-left"></i><label>Project Structure</label></a>
    <a class="nav nav-next" href="/documentation/codenesium/generated-code/services/" title="Services" style="margin-right: 0px;"><label>Services</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    
  </div>


	<div>


  
    <p>See a mistake? Email us at support@codenesium.com</p>

  



	</div>
</footer>

<script src="/documentation/js/clipboard.min.js"></script>

<link href="/documentation/css/featherlight.min.css" rel="stylesheet">
<script src="/documentation/js/featherlight.min.js"></script>



<script src="/documentation/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>